<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
	<head>
		<title>The Image Project</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15" />
		<link rel="stylesheet" href="/styles/style.css" />
	</head>
	<body>
	<div id="conteneur">

		  <div id="header">The Image Project</div>
		  
		  <div id="haut">
			<ul class="menuhaut">
				<li><a href="/">Home</a></li>
				<li><a href="/list/popular">Popular</a></li>
				<li><a href="/list/recent">Recent</a></li>

				<li><a href="/submit">Submit</a></li>
			</ul>
		  </div>

		  <div id="centre">
<style>
label {
	display: block;
	width: 8em;
	float: left;
	text-align: right;
	margin-right: 0.5em;
}
input, textarea {
	width: 18em;
}
input[type="submit"] {
	width: 8em;
	margin-left: 7.5em;
}
</style>

<h1>Submit Picture</h1>

<html><body>
<%
 
if form.has_key('image') and form['image'].filename:
	# A nested Field object holds the file
	fileitem = form['image]
	description = form['description']
	submituser = form['submituser']
	tags = form['tags']
	params = urllib.urlencode({'image': fileitem, 'description': description, 'submituser': submituser, 'tags': tags})
	f = urllib.urlopen("http://imaj.lddi.org:8010/submitimage", params)
	result = jsontemplate.expand('{success}', json.read(f.read()))
	if result == "true"
		req.write("Thank you for your submission!\nAfter it is reviewed, it will be posted on the website!"
	else
		req.write("There was an error with your submission.\nPlease try again
	#
else
	#
%>


<form action="/submit/" method="post" enctype="multipart/form-data">

<input type="hidden" name="filesubmit" value="true"/>
<label>Picture</label>
<input type="file" name="image"/><br/>
<label>Tags</label>
<input type="text" name="tags" value=""/> (comma seperated)<br/>
<label>Description</label>
<textarea name="description"></textarea><br/>
<label>Your Name</label>
<input type="text" name="submituser" value=""/><br/>
<input type="submit" value="Submit Picture"/>

</form>
<%
#
%>

		  </div>
		<div id="pied">CS462 Server created by Sam. Design by <a href="http://nicolas.freezee.org">Nicolas Fafchamps</a></div>
	</div>
	</body>
</html>

